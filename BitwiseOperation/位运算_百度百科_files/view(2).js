baidu.each(baidu.dom.query(".lemma-main-content"),function(_){baidu.on(_,"mousedown",function(_){var B=baidu.event.get(_),A=B.target;if(A.tagName.toLowerCase()=="a"&&/\/view\/\d+.htm(l)?$/.test(A.href)){nslog(A.href,12);}A=null;});});bk.view.logInfo={};baidu.each(baidu.q("log-set-param"),function(B){var _=baidu.dom.getAttr(B,"log-set-param").split(":");if(_.length==1){var A=bk.view.logInfo[_[0]]||0;A++;}else{A=_[1];}bk.view.logInfo[_[0]]=A;});baidu.object.each(bk.view.logInfo,function(_,A){nslog.set(A,_);});nslog(location.href,11);baidu.page.loadJsFile("http://hm.baidu.com/h.js?55b574651fcae74b0a9f1cf9c8d7c93a");baidu.more.ns("bk.view");bk.view.imageTitleInit=function(_){bk.view.imageInit(_);bk.view.picAct(_);_.style.visibility="visible";};bk.view.imageInit=function(B){var C=B.getElementsByTagName("span")[0],A=B.getElementsByTagName("img")[0].offsetWidth;if(!!C){var _=C.innerHTML,E=_.indexOf("<sup>"),D=E>0?_.substr(0,E):_;if(/^\s*$/.test(_)){C.innerHTML="&nbsp;&nbsp;";}else{C.innerHTML=baidu.string.wbr(D)+(E>0?_.substr(E):"");}}B.style.width=A+"px";return A;};bk.view.cardImageInit=function(A){var _=A.getElementsByTagName("img")[0];tools.image.sizelimit(_,200,200);A.style.width=_.width+"px";baidu.dom.last(A).innerHTML=_.title;};bk.view.picAct=function(B){B.style.position="relative";var A=B.getElementsByTagName("a")[0];if(A&&A.href.match(/\/image\//)){var _=document.createElement("a");baidu.dom.addClass(_,"pic-handle");_.title="\u67e5\u770b\u56fe\u7247";_.href=A.href;_.innerHTML="&nbsp;&nbsp;";_.target="_blank";baidu.dom.insertBefore(_,A);baidu.on(B,"mouseover",function(){baidu.dom.addClass(B,"pic-hover");});baidu.on(B,"mouseout",function(){baidu.dom.removeClass(B,"pic-hover");});baidu.on(_,"mouseover",function(){baidu.dom.addClass(B,"pic-hover");});}A=null;_=null;};bk.view.lemmaImageInit=function(_){baidu.each(baidu.q("text_pic",_),function(_){bk.view.imageTitleInit(_);});};baidu.more.ns("bk.view");baidu.more.ns("bk.view.timer");baidu.more.ns("bk.view.sidecatalog");bk.view.sidecatalog.step=22;bk.view.sidecontentList=[];bk.view.sidesubitemList=[];bk.view.sidecatalog.vHeight=80;bk.view.sidecatalog.togglestatus=false;bk.view.sidecatalog.checkToShow=function(){var E=baidu.page.getScrollTop(),A=baidu.page.getViewHeight(),C=baidu.q("b-ent-section"),D=C.length?(baidu.dom.getPosition(C[0]).top-50):800,_=Math.min(A*2,D),B=baidu.page.getHeight()-A-20;if(E<_){return false;}else{return true;}};bk.view.sidecatalog.contentScroll=function(A){var G=baidu.g("side-title-list"),C=A*bk.view.sidecatalog.step,F=bk.view.sidecatalog.vHeight,_=bk.view.sidecatalog.getTotalHeight()-70;if(F<=0){return;}var H=parseInt(G.style.top)||0,B=H+C,D="normal";if(B>=0){B=0;D="top";}if(B+_<=F){B=Math.min(-_+F,0);D=(D=="top")?"both":"bottom";}bk.view.sidecatalog.statuschange(D);B=B-B%bk.view.sidecatalog.step;var E=new FX(G,{top:{to:B}},0.3,"linear");E.start();};bk.view.sidecatalog.init=function(){var _=baidu.q("holder1","content"),A=baidu.g("page"),B=baidu.g("sublemma-options-list");if(!B&&_.length==0){baidu.g("sidebar").style.visibility="hidden";nslog("sidebar",1025,{catalog:0});}else{bk.view.sidecatalog.contentbuild();baidu.on("side-catalog-up","mousedown",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.timer.ele_side_catalog_scroll=setInterval(function(){bk.view.sidecatalog.contentScroll(3);},300);});baidu.on("side-catalog-up","mouseup",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);});baidu.on("side-catalog-up","click",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.sidecatalog.contentScroll(3);});baidu.on("side-catalog-down","mousedown",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.timer.ele_side_catalog_scroll=setInterval(function(){bk.view.sidecatalog.contentScroll(-3);},300);});baidu.on("side-catalog-down","click",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);bk.view.sidecatalog.contentScroll(-3);});baidu.on("side-catalog-down","mouseup",function(){clearInterval(bk.view.timer.ele_side_catalog_scroll);});baidu.on("side-catalog-up","mouseover",function(_){if(this.className!="disabled"){baidu.addClass(this,"hover");}});baidu.on("side-catalog-up","mouseout",function(_){baidu.removeClass(this,"hover");});baidu.on("side-catalog-down","mouseout",function(_){baidu.removeClass(this,"hover");});baidu.on("side-catalog-down","mouseover",function(_){if(this.className!="disabled"){baidu.addClass(this,"hover");}});nslog("sidebar",1025,{catalog:1});}};bk.view.sidecatalog.realList=[];bk.view.sidecatalog.realListUpdate=function(){bk.view.sidecatalog.realList=[];baidu.each(bk.view.sidecontentList,function(_){if(_.display){bk.view.sidecatalog.realList.push(_);}});};bk.view.sidecatalog.contentbuild=function(){var E=baidu.g("content"),L=baidu.q("headline-1",E),K=baidu.q("headline-2",E),I=baidu.dom.query(".b-ent-section h2",E);baidu.each([I,L,K],function(_){baidu.each(_,function(_){baidu.addClass(_,"bk-sidecatalog-title");});});var A=[],H=baidu.q("bk-sidecatalog-title",E);function F(_){return _.replace(/<[^>]*>/g,"");}function _(B,A){var _=F(baidu.q("headline-content",B)[0].innerHTML);return{ele:B,title:_,level:A,display:true};}baidu.each(H,function(D,B){var C=D.tagName.substr(1);if(C==2&&(baidu.dom.hasClass(D.parentNode,"b-ent-section"))){C=1;}D=_(D,C);A.push(D);});if(I&&I.length>0){for(var D=0,B=A.length;D<B;D++){if(A[D].level==1){var G=A[D];bk.view.sidesubitemList.push(G);var C=baidu.dom.hasClass(G.ele.parentNode,"b-ent-section-expand");G.children=[];for(var J=D+1;J<B&&(A[J].level>1);J++){A[J].display=C;G.children.push(A[J]);}if(G.children.length==1){B=B-G.children.length;baidu.each(G.children,function(_){baidu.array.remove(A,_);});G.children=[];}else{D=J-1;}}}}bk.view.sidecontentList=A;bk.view.sidecatalogDomInit();bk.view.sidecatalog.realListUpdate();bk.event.on("bk.event.SectionStatusChanged",bk.view.sidecatalog.subitemchanged);};bk.view.sidecatalogDomInit=function(){var D=document.createElement("div"),A=document.createElement("div"),I=document.createElement("div"),G=document.createElement("div"),_=document.createElement("div");A.id="side-title-list";D.id="side-title-panel";I.id="side-catalog-up";G.id="side-catalog-down";_.id="side-lemma-title";var B={"\u5206\u96c6\u5267\u60c5":"series","\u5267\u60c5\u7b80\u4ecb":"synopsis"};baidu.each(bk.view.sidecontentList,function(E,_){var C=document.createElement("h"+E.level);if(E.level==1&&baidu.dom.hasClass(E.ele.parentNode,"b-ent-section-expand")){C.className="expend";}var D=["<a href='#' class='nslog:1026' data-index = '"+_+"'",B[E.title]?("log-data-detail = '"+B[E.title])+"' ":"","title='",baidu.string.encodeHTML(E.title),"' title='"+E.title+"'>",E.title.subByte(28),"</a>"];C.innerHTML=D.join("");A.appendChild(C);E.item=C;if(!E.display){baidu.hide(C);}C=null;});D.appendChild(A);var C=baidu.g("side-catalog-content");_.innerHTML=baikeViewInfo.title;I.innerHTML="<div></div>";G.innerHTML="<div></div>";C.appendChild(I);C.appendChild(_);C.appendChild(D);C.appendChild(G);var F=A.getElementsByTagName("a");for(var H=0,E=F.length;H<E;H++){baidu.on(F[H],"click",function(A){if(this.parentNode.tagName.toLowerCase()=="h1"){var _=this.parentNode;baidu.each(bk.view.sidesubitemList,function(B,A){if(B.item==_){bk.view.showSubLemmaItem(A);setTimeout(bk.view.sidecatalog.resize,200);}});}bk.view.sidecatalog.scrollto(baidu.dom.getAttr(this,"data-index"));baidu.event.preventDefault(A);});}F=null;A=D=I=G=C=null;};bk.view.sidecatalog.scrollto=function(_){if(bk.view.sidecontentList[_]){var A=tool.dom.getTopPos(bk.view.sidecontentList[_].ele)-10;window.scrollTo(0,A);}};bk.view.sidecatalog.statuschange=function(_){switch(_){case"top":baidu.g("side-catalog-up").className="disable";baidu.removeClass("side-catalog-down","disable");break;case"bottom":baidu.g("side-catalog-down").className="disable";baidu.removeClass("side-catalog-up","disable");break;case"normal":baidu.removeClass("side-catalog-up","disable");baidu.removeClass("side-catalog-down","disable");break;case"both":baidu.g("side-catalog-up").className="disable";baidu.g("side-catalog-down").className="disable";break;}};bk.view.sidecatalog.subitemchanged=function(A){var _=baidu.dom.hasClass(A.ele,"b-ent-section-expand"),B=bk.view.sidesubitemList[A.index];if(B){baidu.dom[_?"addClass":"removeClass"](B.item,"expend");baidu.each(B.children,function(A){baidu[_?"show":"hide"](A.item);A.display=_;});bk.view.sidecatalog.realListUpdate();bk.view.sidecatalog.resize();}};bk.view.sidecatalog.toggle=function(){var _=false;return function(){baidu[_?"hide":"show"]("side-catalog-content");baidu[_?"removeClass":"addClass"]("sidebar","show");_=!_;bk.view.sidecatalog.togglestatus=_;var B=bk.view.sidecatalog.tofocus;if(baidu.ie&&baidu.ie<7){B=bk.view.sidecatalog.delayfocus;}if(_){bk.view.sidecatalog.tofocus();baidu.on(window,"scroll",B);}else{try{baidu.un(window,"scroll",B);}catch(A){}}nslog("sidecatalog.toggle",1027,{status:_});};};bk.view.sidecatalog.delayfocus=function(){clearTimeout(bk.view.timer.scroll_catalogfocus);bk.view.timer.scroll_catalogfocus=setTimeout(bk.view.sidecatalog.tofocus,200);};bk.view.sidecatalog.tofocus=function(){if(bk.view.sidecatalog.togglestatus){var J=baidu.page.getScrollTop()+70,F=baidu.g("side-title-list");if(F){var D=bk.view.sidecatalog.vHeight,B=bk.view.sidecatalog.getTotalHeight()-70;if(D<=0||B==0){return;}for(var I=0,E=bk.view.sidecatalog.realList.length;I<E;I++){var C=bk.view.sidecatalog.realList[I];if(tool.dom.getTopPos(C.ele)<=J&&((I+1==E)||((I+1<E)&&tool.dom.getTopPos(bk.view.sidecatalog.realList[I+1].ele)>J))){var _=I*bk.view.sidecatalog.step,H=D/2;H=H-H%22;var G=Math.min(D-_-H,0),A="normal";if(G+B<=D){G=-B+D;A="bottom";}if(G==0){A=(A=="bottom")?"both":"top";}bk.view.sidecatalog.statuschange(A);baidu.dom.setStyle(F,"top",G);baidu.addClass(C.item,"on");}else{baidu.removeClass(C.item,"on");}}}}};bk.view.sidecatalog.getTotalHeight=function(){var _=0;baidu.each(bk.view.sidecontentList,function(A){if(A.display){_++;}});return(_*bk.view.sidecatalog.step+70);};bk.view.sidecatalog.resize=function(C){var G=baidu.g("sidecatalog"),A=baidu.g("side-catalog-content"),D=baidu.g("wrap"),F=baidu.dom.getPosition(D),B=bk.view.sidecatalog.getTotalHeight(),E=Math.min(baidu.page.getViewHeight()-200,510);E=E-E%22;if(B>E){B=E;}if(B<92){B=92;}bk.view.sidecatalog.vHeight=B-70;tools.fixable(G,{top:(baidu.page.getViewHeight()-150),left:(D.offsetWidth+F.left-40-246)});tools.fixable(A,{overflow:"hidden",height:B,top:(baidu.page.getViewHeight()-B-60),left:(D.offsetWidth+F.left-259)});var _=baidu.g("side-title-panel");if(_){baidu.dom.setStyle(_,"height",B-70);}bk.view.sidecatalog.tofocus();};bk.view.sidecatalog.scroll=function(_){var A=baidu.g("sidecatalog");clearTimeout(bk.view.timer.ele_side_catalog);if(!bk.view.sidecatalog.checkToShow()){baidu.hide(A);baidu.hide(baidu.g("side-catalog-content"));}else{baidu.show(A);if(bk.view.sidecatalog.togglestatus){baidu.show("side-catalog-content");}}};baidu.dom.ready(function(){bk.view.sidecatalog.init();bk.view.sidecatalog.resize();bk.view.sidecatalog.scroll();baidu.on(window,"scroll",bk.view.sidecatalog.scroll);baidu.on("sidebar","click",bk.view.sidecatalog.toggle());baidu.on(window,"resize",bk.view.sidecatalog.resize);});var Detect={detecting:function(){handle_doDetect();},url:"",id:"",subId:"",uptime:"",upnum:"",upst:"",content:"",latestid:""};function formatDetect(_){var A=Fe.Dialog.open("/page/detect.html",_);return A;}Detect.callback=function(_,B){if(_.toAuditDivideVersionNum!=0){Detect.content="\u62b1\u6b49\uff0c\u8be5\u8bcd\u6761\u5f53\u524d\u5b58\u5728\u5f85\u901a\u8fc7\u7248\u672c\uff0c\u8bf7\u7a0d\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\u3002";var A=formatDetect({title:"\u7f16\u8f91\u63d0\u793a",width:"388px",height:"190px",buttonbar:true,buttonAccept:false,buttonCancel:true,contentType:"HTMLUrl",locked:true,buttonCancelValue:"\u8fd4\u56de"});}else{if(_.conflictVersionNum>=_.conflictLimit){if(_.conflictLimit){var C;if(baidu.G("BkLogUser")){C="func=editdeny&username="+baidu.G("BkLogUser").innerHTML+"&lid="+baikeViewInfo.id;}else{C="func=editdeny&lid="+baikeViewInfo.id;}nslog.stat(C);Detect.content="\u5f88\u62b1\u6b49\uff0c\u8be5\u8bcd\u6761\u5df2\u6709\u591a\u4e2a\u7248\u672c\u6b63\u5728\u63d0\u4ea4\u4e2d\uff0c\u60a8\u5f53\u524d\u65e0\u6cd5\u7f16<br>\u8f91\u8be5\u8bcd\u6761\uff1a\uff08<br><br>\u767e\u79d1\u5efa\u8bae\u60a8\u665a\u4e9b\u65f6\u5019\u518d\u5c1d\u8bd5\u7f16\u8f91\u8be5\u8bcd\u6761\uff0c\u6216\u5c1d\u8bd5\u7f16\u8f91\u5176\u4ed6<br>\u8bcd\u6761\u3002";A=formatDetect({title:"\u7f16\u8f91\u63d0\u793a",width:"388px",height:"190px",buttonbar:true,buttonAccept:false,buttonCancel:true,contentType:"HTMLUrl",locked:true,buttonCancelValue:"\u8fd4\u56de"});}else{if(_.isMidNight==1){Detect.content='\u60a8\u5f53\u524d\u7684\u7f16\u8f91\u65f6\u95f4\u5c5e\u767e\u79d1<a href="http://www.baidu.com/search/baike_help.html#&#20160;&#20040;&#26159;&#22812;&#38388;&#32534;&#36753;&#25552;&#31034;" target="_blank">\u7279\u6b8a\u7f16\u8f91\u65f6\u6bb5</a>\u3002<br><br>\u4e3a\u4fdd\u8bc1\u60a8\u7684\u7f16\u8f91\u6210\u679c\u5728\u63d0\u4ea4\u540e\u7684\u6700\u77ed\u65f6\u95f4\u5185\u751f\u6548\uff0c\u767e\u79d1\u5efa<br>\u8bae\u60a8\u9009\u62e9\u5176\u4ed6\u65f6\u95f4\u8fdb\u884c\u7f16\u8f91\uff1a\uff09<br><br>\u4ecd\u7136\u8981\u7ee7\u7eed\u7f16\u8f91\u5417\uff1f';A=formatDetect({title:"\u7f16\u8f91\u63d0\u793a",width:"388px",height:"190px",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true});A.onaccept=function(){if(!B){window.location=Detect.url;}else{B();}};}else{if(!B){window.location=Detect.url;}else{B();}}}}else{if((_.conflictDegree==1)||(_.conflictDegree==2)){Detect.content="\u8be5\u8bcd\u6761\u5f53\u524d\u5df2\u6709\u5176\u4ed6\u7248\u672c\u6b63\u5728\u7b49\u5f85\u901a\u8fc7\u3002<br><br>\u4e3a\u4e86\u4fdd\u969c\u60a8\u7684\u7f16\u8f91\u80fd\u5f97\u5230\u53ca\u65f6\u901a\u8fc7\uff0c\u5efa\u8bae\u60a8\u7a0d\u540e\u518d\u7f16\u8f91<br>\u672c\u8bcd\u6761\uff1a\uff09<br><br>\u4ecd\u7136\u8981\u7ee7\u7eed\u5417\uff1f";A=formatDetect({title:"\u7f16\u8f91\u63d0\u793a",width:"388px",height:"190px",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true});A.onaccept=function(){if(!B){window.location=Detect.url;}else{B();}};}else{if(_.isMidNight==1){Detect.content='\u60a8\u5f53\u524d\u7684\u7f16\u8f91\u65f6\u95f4\u5c5e\u767e\u79d1<a href="http://www.baidu.com/search/baike_help.html#&#20160;&#20040;&#26159;&#22812;&#38388;&#32534;&#36753;&#25552;&#31034;" target="_blank">\u7279\u6b8a\u7f16\u8f91\u65f6\u6bb5</a>\u3002<br><br>\u4e3a\u4fdd\u8bc1\u60a8\u7684\u7f16\u8f91\u6210\u679c\u5728\u63d0\u4ea4\u540e\u7684\u6700\u77ed\u65f6\u95f4\u5185\u751f\u6548\uff0c\u767e\u79d1\u5efa<br>\u8bae\u60a8\u9009\u62e9\u5176\u4ed6\u65f6\u95f4\u8fdb\u884c\u7f16\u8f91\uff1a\uff09<br><br>\u4ecd\u7136\u8981\u7ee7\u7eed\u7f16\u8f91\u5417\uff1f';A=formatDetect({title:"\u7f16\u8f91\u63d0\u793a",width:"388px",height:"190px",buttonbar:true,buttonAccept:true,buttonCancel:true,contentType:"HTMLUrl",locked:true});A.onaccept=function(){if(!B){window.location=Detect.url;}else{B();}};}else{if(!B){window.location=Detect.url;}else{B();}}}}}};Detect.doDetect=function(fn){var _str="tp=0&r="+Math.random()+"&lemmaid="+Detect.id+"&lemmaVersionId=0",_url="/getConflictInfo/?"+_str;baidu.ajax.get(_url,function(xhr){Detect.callback(eval("("+xhr.responseText+")"),fn);});};function formatDetect_privcheck(_){var A=Fe.Dialog.open("/page/privcheck.html",_);return A;}function handle_doDetect(){baidu.sio.callByBrowser("/static/common/js/common/Dialog.js",function(){var _="/api/editcheck?lemmaId="+baikeViewInfo.id+(Detect.subId?("&subLemmaId="+Detect.subId):"")+"&flag=1";baidu.ajax.get(_,function(A,_){_=baidu.json.parse(_);if(typeof(_)=="object"){Detect.content="<center></center><p>"+baikeViewInfo.title+"\u5df2\u4e3a"+_.stdWord+"\u7684\u6765\u6e90\u8bcd\uff0c\u65e0\u6cd5\u7ee7\u7eed\u8fdb\u884c\u7f16\u8f91\uff0c\u70b9\u51fb\u201c\u786e\u5b9a\u201d\uff0c\u60a8\u53ef\u521b\u5efa\u6807\u51c6\u8bcd"+_.stdWord+"\u3002</p>";var B=formatDetect_privcheck({title:"\u7f16\u8f91\u63d0\u793a",width:"402px",height:"220px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true});B.onaccept=function(){window.open("/search_noitem/?create=0&word="+_.stdWord);};}else{if(_=="12"){Detect.content='<center><h2>\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6682\u65f6\u6ca1\u6709\u6743\u9650\u7f16\u8f91\u8be5\u8bcd\u6761\u3002</h2></center><p>\u60a8\u597d\uff0c\u8be5\u8bcd\u6761\u5185\u5bb9\u5df2\u8f83\u4e30\u5bcc\uff0c\u73b0\u4ec5\u5bf9\u767e\u79d1\u7b49\u7ea7\u8fbe\u5230<b>\u56db\u7ea7</b>\uff0c\u4e14\u901a\u8fc7\u7387\u8fbe\u5230<b>85%</b>\u7684\u79d1\u53cb\u5f00\u653e\u7f16\u8f91\u3002</p><p>\u5f53\u60a8\u901a\u8fc7\u52aa\u529b\u8fbe\u5230\u4ee5\u4e0a\u8981\u6c42\uff0c\u5c31\u53ef\u4ee5\u53c2\u4e0e\u7f16\u8f91\u8be5\u8bcd\u6761\u4e86\u3002</p><p>\u5982\u679c\u60a8\u8ba4\u4e3a\u8be5\u8bcd\u6761\u8fd8\u9700\u8fdb\u4e00\u6b65\u5b8c\u5584\uff0c\u53ef\u4ee5\u5230<a href="http://tousu.baidu.com/baike/add" target="_blank">\u6295\u8bc9\u4e2d\u5fc3</a>\u53cd\u9988\u3002</p><p><img src="http://img.baidu.com/img/baike/usercenter/growuptask/star.gif" class="star" />\u53c2\u52a0<a target="_blank" href="/uc/task" onclick="nslog(this.href, 449)">\u6210\u957f\u4efb\u52a1</a>\uff0c\u66f4\u5feb\u638c\u63e1\u767e\u79d1\u7f16\u8f91\u6280\u5de7\uff0c\u52a0\u901f\u5347\u7ea7\uff01</p>';B=formatDetect_privcheck({title:"\u7f16\u8f91\u63d0\u793a",width:"402px",height:"220px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true});}else{Detect.doDetect();}}});});}baidu.more.ns("bk.view");bk.view.showEditLinks=function(){function _(D){var B=baidu.dom.getAttr(D,"data-edit-id");if(B){var _=B,A=0,C=0;B=B.split(":");if(B.length>1){_=B[0];A=B[1];C=B[2];}D.innerHTML=["<a href='#' class='nslog:1019' onclick='bk.view.editLemma(\"/edit/\",",_,",",A,",",C,");return false'>\u7f16\u8f91\u672c\u6bb5</a>"].join("");}}baidu.each(baidu.q("editable-title"),_);};bk.view.showEditButton=function(){baidu.each(baidu.q("editable-lemma","content","span"),function(A){var _=baidu.dom.getAttr(A,"data-edit-id");if(_){baidu.on(A,"mouseover",function(){baidu.dom.addClass(this,"onhover");});baidu.on(A,"mouseout",function(){baidu.dom.removeClass(this,"onhover");});baidu.on(A,"click",function(){bk.view.editLemma("/edit/",_);nslog("edit",1020);});}});};bk.view.initDivideButton=function(){baidu.on("subSet","click",function(A){var _=baidu.dom.getAttr("subSet","data-edit-id"),B=baidu.dom.getAttr("subSet","href");bk.view.dividLemma(B,_,B.indexOf("polysemysetsub")!=-1?bk.view.setLemmaSub:false);baidu.event.preventDefault(A);});};bk.view.showSubLemmaEditLink=function(){baidu.each(baidu.q("b-ent-section-action-edit","content","a"),function(C){var B=baidu.dom.getAttr(C,"data-edit-id");if(B){var _=B.split(":")[0],A=B.split(":")[1];baidu.on(C,"click",function(B){bk.view.editLemma("/edit/",_,A);nslog("edit",1020);baidu.event.stop(B);});C.innerHTML='<span class="med-slv-bdr"><em class="sprite"></em>\u7f16\u8f91\u672c\u4e49\u9879</span>';}});};bk.view.showSetLemmaSubLink=function(){var _="hook-polysemy-set-sub";baidu.each(baidu.q(_,"content","a"),function(C){var B=baidu.dom.getAttr(C,"data-"+_);B=baidu.json.parse(B);if(B){var A=B.lemmaId;baidu.on(C,"click",function(_){userlogin.check(function(){bk.view.setLemmaSub(B);},false,"polysemysetsub");baidu.event.preventDefault(_);});}});};bk.view.showAddLemmaSubLink=function(){var _="hook-polysemy-add-sub";baidu.each(baidu.q(_,"content","a"),function(C){var B=baidu.dom.getAttr(C,"data-"+_);B=baidu.json.parse(B);if(B){var A=B.lemmaId;baidu.on(C,"click",function(_){Detect.url="/createpolysemyitem?lemmaid="+A;Detect.id=A;var B="polysemysetsub";userlogin.check(Detect.detecting,false,B);baidu.event.preventDefault(_);});}});};baidu.dom.ready(function(){if(baikeViewInfo.editable!="false"){bk.view.showEditLinks();bk.view.showEditButton();bk.view.showSubLemmaEditLink();bk.view.showAddLemmaSubLink();bk.view.showSetLemmaSubLink();bk.view.initDivideButton();}});bk.view.editRelated=function(){baidu.sio.callByBrowser("/static/common/js/common/Dialog.js",function(){var _="/api/editcheck?lemmaId="+baikeViewInfo.id;baidu.ajax.get(_,function(A,_){if(_=="12"){Detect.content='<center><h2>\u5bf9\u4e0d\u8d77\uff0c\u60a8\u6682\u65f6\u6ca1\u6709\u6743\u9650\u7f16\u8f91\u8be5\u8bcd\u6761\u3002</h2></center><p>\u60a8\u597d\uff0c\u8be5\u8bcd\u6761\u5185\u5bb9\u5df2\u8f83\u4e30\u5bcc\uff0c\u73b0\u4ec5\u5bf9\u767e\u79d1\u7b49\u7ea7\u8fbe\u5230<b>\u56db\u7ea7</b>\uff0c\u4e14\u901a\u8fc7\u7387\u8fbe\u5230<b>85%</b>\u7684\u79d1\u53cb\u5f00\u653e\u7f16\u8f91\u3002</p><p>\u5f53\u60a8\u901a\u8fc7\u52aa\u529b\u8fbe\u5230\u4ee5\u4e0a\u8981\u6c42\uff0c\u5c31\u53ef\u4ee5\u53c2\u4e0e\u7f16\u8f91\u8be5\u8bcd\u6761\u4e86\u3002</p><p>\u5982\u679c\u60a8\u8ba4\u4e3a\u8be5\u8bcd\u6761\u8fd8\u9700\u8fdb\u4e00\u6b65\u5b8c\u5584\uff0c\u53ef\u4ee5\u5230<a href="http://tousu.baidu.com/baike/add" target="_blank">\u6295\u8bc9\u4e2d\u5fc3</a>\u53cd\u9988\u3002</p><p><img src="http://img.baidu.com/img/baike/usercenter/growuptask/star.gif" class="star" />\u53c2\u52a0<a target="_blank" href="/uc/task" onclick="nslog(this.href, 449)">\u6210\u957f\u4efb\u52a1</a>\uff0c\u66f4\u5feb\u638c\u63e1\u767e\u79d1\u7f16\u8f91\u6280\u5de7\uff0c\u52a0\u901f\u5347\u7ea7\uff01</p>';var C=formatDetect_privcheck({title:"\u7f16\u8f91\u63d0\u793a",width:"402px",height:"220px",buttonbar:true,buttonAccept:true,buttonCancel:false,contentType:"HTMLUrl",locked:true});}else{var B="/relatedEdit/?id="+baikeViewInfo.id+"&title="+G("titleVal").value;g_pop=new Popup({contentType:1,isReloadOnClose:false,width:536,height:550});g_pop.setContent("title","\u5b8c\u5584\u76f8\u5173\u8bcd\u6761");g_pop.setContent("contentUrl",B);g_pop.build();g_pop.show();}});});};bk.view.setLemmaSub=function(){var _="/polysemysetsub/id="+Detect.id;g_pop=new Popup({contentType:1,isReloadOnClose:false,width:536,height:420});g_pop.setContent("title","\u4e49\u9879\u8bbe\u7f6e");g_pop.setContent("contentUrl",_);g_pop.build();g_pop.show();};bk.view.editLemma=function(C,A,F,E){Detect.url=C+"id="+A+(F?"&subLemmaId="+F:"")+(E?"&dl="+E:"");if(location.href.indexOf("fr=")!=-1){var D=location.search.split("&"),_="";baidu.each(D,function(A,B){if(A.indexOf("fr=")!=-1){_=A;}});Detect.url+="&"+_;}Detect.id=A;Detect.subId=F;var B=(E?"part_edit":"edit");userlogin.check(Detect.detecting,false,B);};editLemmaPara=bk.view.editLemma;bk.view.dividLemma=function(A,_,B){Detect.url=A;Detect.id=_;userlogin.check(function(){baidu.sio.callByBrowser("/static/common/js/common/Dialog.js",function(){Detect.doDetect(B);});},false,A);};baidu.more.ns("lemma");baidu.more.ns("bk.view");bk.view.vote=function(){var _="/view/getLemmaCountAsc/lemmaid="+baikeViewInfo.id+"&random="+Math.random();baidu.sio.callByBrowser(_);};function ascUpdateData(_){if(_.length==1){if(_[0]>=0){baidu.G("vote_num").innerHTML=_[0];baidu.G("vote_txt").innerHTML="\u60a8\u5df2\u8bc4\u4ef7\uff0c\u8c22\u8c22\uff01";}else{if(_[0]==-1){baidu.G("vote_txt").innerHTML="\u60a8\u5df2\u8bc4\u4ef7\uff0c\u8c22\u8c22\uff01";}}}}function gotoRef(_,D){if(!_){return false;}var E=D?("_"+D):"",C=_.innerHTML.replace(/\[/g,"").replace(/\]/g,""),C=parseInt(C);if(C>=0){var A=baidu.G("refIndex_"+C+E);if(A&&A.parentNode){var B=baidu.dom.getPosition(A.parentNode).top-0;if(B>0){window.scrollTo(0,B);}}}}bk.view.showMoreRelated=function(){var A=baidu.G("word_more"),_=baidu.G("word_more_con");if(_.style.display=="none"){A.className="word_more2";_.style.display="";_.title="\u6536\u8d77";}else{A.className="word_more1";_.style.display="none";_.title="\u5c55\u5f00";}};bk.view.coEditorInit=function(){var A=baidu.G("co-editors");if(!A){return;}if(A.offsetHeight>25){baidu.show("more-coeditor");var _=A.getElementsByTagName("span");while(A.offsetHeight>25&&_.length>0){A.removeChild(_[_.length-1]);}}};bk.view.relatedInit=function(){var A=baidu.G("word_more");if(!A){return false;}var D=baidu.G("word_more_con").getElementsByTagName("a"),F=baidu.G("onelinespan"),_=baidu.G("onelinediv"),C=D.length;for(var E=0;E<C;E++){var B=D[E].cloneNode(true);F.appendChild(B);if(F.offsetWidth>(_.offsetWidth-60)){F.removeChild(B);A.style.visibility="visible";_.style.visibility="visible";baidu.on(A,"mouseover",function(){baidu.addClass(this.childNodes[0],"hover");});baidu.on(A,"mouseout",function(){baidu.removeClass(this.childNodes[0],"hover");});return;}}_.style.visibility="visible";};bk.view.getDays=function(D){if(!D){return"";}var B=D.match(/(\d{2,4})-(\d{1,2})-(\d{1,2})/);B[2]=parseInt(B[2],10)-1;var A=new Date(B[1],B[2],B[3]),_=new Date(),C=new Date(_.getFullYear(),_.getMonth(),_.getDate()-1),E=parseInt((A-C)/(1000*3600*24));switch(E){case 1:return"\u4eca\u5929";case 0:return"\u6628\u5929";case-1:return"2\u5929\u524d";case-2:return"3\u5929\u524d";}return D;};function ctrlBKDynamic(){if(typeof bkDynamic!="undefined"){var _=bkDynamic[0];baidu.G("profileTitle").innerHTML=_;if(!!bkDynamic[1][0]){baidu.G("task").innerHTML="<dt><strong>"+bkDynamic[1][0]+'</strong>\uff1a<a href="'+bkDynamic[1][1][1]+'" target="_blank">'+bkDynamic[1][1][0]+'</a></dt> <dd><a href="'+bkDynamic[1][1][1]+'" target="_blank"><img src="'+bkDynamic[1][1][2]+'" width="160" height="81"></a></dd>';baidu.show("task");}if(!!bkDynamic[2][0]){baidu.G("notice").innerHTML="<dt><strong>"+bkDynamic[2][0]+"</strong>\uff1a</dt>"+bkDynamic[2][1];baidu.show("task");}baidu.show("bkDynamic");baidu.each(baidu.G("bkDynamic").getElementsByTagName("a"),function(A,_){baidu.on(A,"click",function(){nslog(this.href,235,{index:_});});});}}bk.view.getDynamicData=function(){baidu.sio.callByBrowser("/template/baikeDynamicData.js?random="+Math.random());};bk.view.reflow=function(){baidu.g("content").style.zoom=1.01;baidu.g("content").style.zoom=1;};bk.view.copylog=bk.view.copylog||function(){};bk.view.copylog.isDbClick=false;bk.view.copylog.sendSelectInfo=function(){var _=arguments[0],A=arguments[1];if(((baidu.ie&&_==1&&!bk.view.copylog.isDbClick)||_==0&&!bk.view.copylog.isDbClick)||A){var B;if(window.getSelection){B=window.getSelection();}else{if(document.getSelection){B=document.getSelection();}else{if(document.selection){B=document.selection.createRange().text;}}}}bk.view.copylog.isDbClick=false;};baidu.dom.ready(function(){baidu.on("content","mouseup",function(_){var A=_.button;setTimeout(function(){bk.view.copylog.sendSelectInfo(A,false);},20);});baidu.on("content","copy",function(_){var A=_.button;setTimeout(function(){bk.view.copylog.sendSelectInfo(A,true);},20);});baidu.event.on("content","dblclick",function(_){bk.view.copylog.isDbClick=true;});});baidu.dom.ready(function(){baidu.array.each(baidu.q("contri-expand","pro-contributors"),function(_){baidu.on(_,"click",function(B){baidu.event.stop(B);var A=baidu.dom.getText(_);if(A=="\u5c55\u5f00"){bk.view.showLemma(baidu.dom.getAttr(_,"userName"),_);}else{bk.view.hideLemma(baidu.dom.getAttr(_,"userName"),_);}});});var _=baidu.g("contri-more");if(_){baidu.on(_,"click",function(_){baidu.event.stop(_);bk.view.showMoreContri();});}});bk.view.showLemma=function(A,_){baidu.array.each(baidu.q(A,"pro-contributors"),function(E,B){if(B==0){var D='<img class="contri-hide" src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",A);baidu.dom.query("td span",baidu.g(E))[0].innerHTML=D;baidu.on(baidu.dom.query("td span img",baidu.g(E))[0],"click",function(){bk.view.hideLemma(A,_);});}else{}try{baidu.dom.show(E);}catch(C){}});_.innerHTML="\u6536\u8d77";nslog(window.location.href,1029);};bk.view.hideLemma=function(A,_){baidu.array.each(baidu.q(A,"pro-contributors"),function(A){try{baidu.dom.hide(A);}catch(_){}});_.innerHTML="\u5c55\u5f00";};bk.view.showMoreContri=function(limitRow){var limit=limitRow||20;baidu.ajax.get("/api/lemmaGrow?lemmaId="+baikeViewInfo.id+"&limit=20&callback= ",function(req){if(baidu.g("tr-contri-more")){baidu.dom.remove("tr-contri-more");}var json=eval("("+req.responseText+")"),dom=[];dom.push(' <table width="235px;" border="0" cellspacing="0" cellpadding="0" class="topuser f12">');var lemmaData=json.lemmaGrow.data,showGd=false,showComplex=false;for(var index=0;index<lemmaData.length;index++){var showIcon=true;if(index>=limit){break;}var lemma=lemmaData[index],userName;if(((lemma.gd&&lemma.gd.length>0)||(lemma.hq&&lemma.hq.length>0))&&!showGd){dom.push("<tr><td colspan='4'><strong>\u7a81\u51fa\u8d21\u732e\u8005\uff1a</strong><img align='absmiddle' src='http://img.baidu.com/img/baike/s/what.gif' title='\u8d21\u732e\u4f18\u8d28\u3001\u9ad8\u8d28\u91cf\u7248\u672c\uff0c\u88ab\u79f0\u4e3a\u7a81\u51fa\u8d21\u732e\u8005'/></td></tr>");showGd=true;}else{if(!lemma.gd&&!lemma.hq&&lemma.complex.length>0&&!showComplex){dom.push("<tr><td colspan='4'><strong>\u8f9b\u52e4\u8d21\u732e\u8005\uff1a</strong><img align='absmiddle' src='http://img.baidu.com/img/baike/s/what.gif' title='\u8d21\u732e\u590d\u6742\u7248\u672c\uff0c\u88ab\u79f0\u4e3a\u8f9b\u52e4\u8d21\u732e\u8005'/></td></tr>");showComplex=true;}}dom.push("<tr><td width='18px'>");if(lemma.user.odpFlag=="2"){var str='<a target="_blank" href="http://baike.baidu.com/cms/s/kdt/index.html"><img align="absmiddle" title="\u767e\u79d1\u874c\u86aa\u56e2" src="http://img.baidu.com/img/baike/userrole/odp'+lemma.user.odpLevel+'.png"></a>';dom.push(str);}dom.push("</td>");userName=lemma.user.userName;dom.push('<th width="100px;"><a class="usercard" username="{lemma.user.userName}" href="http://passport.baidu.com/?business&aid=7&default_tab=2&un='+lemma.user.userName+'#3" target="_blank" title="\u67e5\u770b\u6b64\u7528\u6237\u8d44\u6599">{lemma.user.userName}</a></th>'.replace(/{lemma.user.userName}/g,lemma.user.userName));dom.push('<td width="67px" align="right"><a href="http://www.baidu.com/search/baike_help.html#&#30334;&#31185;&#31215;&#20998;&#20307;&#31995;" target="_blank"><img style="width: 67px;" src="http://img.baidu.com/img/baike/blank.gif" class="usertitle level{level}" align="absmiddle"/></a></td>'.replace("{level}",lemma.user.level));dom.push('<td align="right"><a target="_blank" href="{lemma.verIcon.href}"><img align="absmiddle" title="{lemma.verIcon.name}" src="{lemma.verIcon.src}"/></a>'.replace("{lemma.verIcon.href}",lemma.verIcon.href).replace("{lemma.verIcon.name}",lemma.verIcon.name).replace("{lemma.verIcon.src}",lemma.verIcon.src));var len=parseInt(lemma.gd?lemma.gd.length:0)+parseInt(lemma.hq?lemma.hq.length:0)+parseInt(lemma.complex?lemma.complex.length:0);if(len>1){dom.push('&nbsp;<span userName="{lemma.userId}" class="contri-expand">\u5c55\u5f00</span></td></tr>'.replace("{lemma.userId}",lemma.userId));}else{dom.push('&nbsp;<a target="_blank" class="contri-a nslog:1040" href="/history/id={id}">\u7248\u672c</a></tr>'.replace("{id}",lemma.verIcon.id));}if(len>1&&lemma.gd&&parseInt(lemma.gd.length)>0){baidu.array.each(lemma.gd,function(A,B){dom.push('<tr class="{userName} contri-more-tr" style="display: none">'.replace("{userName}",lemma.userId));dom.push('<td colspan="4">');dom.push('<a target="_blank" href="http://www.baidu.com/search/baike_help.html#&#39640;&#36136;&#37327;&#29256;&#26412;&#19982;&#20248;&#36136;&#29256;&#26412;&#35780;&#36873;&#35268;&#21017;&#65288;&#50;&#48;&#49;&#49;&#45;&#48;&#50;&#45;&#49;&#52;&#65289;"><img align="absmiddle" title="\u4e3a\u8bcd\u6761\u6539\u8fdb\u8d21\u732e\u4e86\u4f18\u8d28\u7248\u672c\u7684\u7528\u6237\uff0c\u88ab\u79f0\u4e3a\u7a81\u51fa\u8d21\u732e\u8005" src="http://img.baidu.com/img/baike/highQualAbs.gif"/></a>');dom.push('&nbsp;<a target="_blank" href="/history/id={id}" class="contri-a nslog:1040">\u7248\u672c</a>'.replace("{id}",A[0]));if(B==0){showIcon=false;var _='<img align="absmiddle" class="contri-hide"  src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",userName);dom.push('<span class="contri-span">');dom.push(_);dom.push("</span></td></tr>");}else{dom.push('<span class="contri-span"></span></td></tr>');}});}if(len>1&&lemma.hq&&parseInt(lemma.hq.length)>0){baidu.array.each(lemma.hq,function(_,B){dom.push('<tr class="{userName} contri-more-tr" style="display: none">'.replace("{userName}",lemma.userId));dom.push('<td colspan="4">');dom.push('<a target="_blank" href="http://www.baidu.com/search/baike_help.html#&#39640;&#36136;&#37327;&#29256;&#26412;&#19982;&#20248;&#36136;&#29256;&#26412;&#35780;&#36873;&#35268;&#21017;&#65288;&#50;&#48;&#49;&#49;&#45;&#48;&#50;&#45;&#49;&#52;&#65289;"><img align="absmiddle" title="\u4e3a\u8bcd\u6761\u6539\u8fdb\u8d21\u732e\u4e86\u9ad8\u8d28\u7248\u672c\u7684\u7528\u6237\uff0c\u88ab\u79f0\u4e3a\u7a81\u51fa\u8d21\u732e\u8005" src="http://img.baidu.com/img/baike/highVersionAbs.gif"/></a>');dom.push('&nbsp;<a target="_blank" href="/history/id={id}" class="contri-a nslog:1040">\u7248\u672c</a>'.replace("{id}",_[0]));if(showIcon&&B==0){var A='<img align="absmiddle" class="contri-hide"  src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",userName);dom.push('<span class="contri-span">');dom.push(A);dom.push("</span></td></tr>");}else{dom.push('<span class="contri-span"></span></td></tr>');}});}if(len>1&&lemma.complex&&parseInt(lemma.complex.length)>0){baidu.array.each(lemma.complex,function(_,B){dom.push('<tr class="{userName} contri-more-tr" style="display: none">'.replace("{userName}",lemma.userId));dom.push('<td colspan="4">');dom.push('<a target="_blank" href="http://www.baidu.com/search/baike_help.html#&#22797;&#26434;&#32534;&#36753;"><img align="absmiddle" title="\u4e3a\u8bcd\u6761\u6539\u8fdb\u8d21\u732e\u4e86\u590d\u6742\u7248\u672c\u7684\u7528\u6237\uff0c\u88ab\u79f0\u4e3a\u8f9b\u52e4\u8d21\u732e\u8005" src="http://img.baidu.com/img/baike/complexVersionAbs.gif"/></a>');dom.push('&nbsp;<a target="_blank" href="/history/id={id}" class="contri-a nslog:1040">\u7248\u672c</a>'.replace("{id}",_[0]));if(showIcon&&B==0){var A='<img align="absmiddle" class="contri-hide"  src="http://img.baidu.com/img/baike/contri_hide.gif" userName="{userName}" style="cursor:pointer;"/>'.replace("{userName}",userName);dom.push('<span class="contri-span">');dom.push(A);dom.push("</span></td></tr>");}else{dom.push('<span class="contri-span"></span></td></tr>');}});}}if(limit==20){dom.push('<tr id="tr-contri-less"><td align="center" colspan="4"><a id="contri-less" href="#" class="contri-a">\u6536\u8d77</a></td></tr>');}else{dom.push('<tr id="tr-contri-more"><td align="center" colspan="4"><a id="contri-more" href="#" class="contri-a">\u67e5\u770b\u66f4\u591a\u8d21\u732e\u8005</a></td></tr>');}dom.push("</table>");baidu.g("contri-div").innerHTML=dom.join("");if(baidu.g("contri-less")){baidu.on(baidu.g("contri-less"),"click",function(_){baidu.event.stop(_);bk.view.showMoreContri(5);});}if(baidu.g("contri-more")){baidu.on(baidu.g("contri-more"),"click",function(_){baidu.event.stop(_);bk.view.showMoreContri();});}baidu.array.each(baidu.q("contri-expand","pro-contributors"),function(_){baidu.on(_,"click",function(B){baidu.event.stop(B);var A=baidu.dom.getText(_);if(A=="\u5c55\u5f00"){bk.view.showLemma(baidu.dom.getAttr(_,"userName"),_);}else{bk.view.hideLemma(baidu.dom.getAttr(_,"userName"),_);}});});baidu.array.each(baidu.q("usercard","pro-contributors"),function(_){usercard.bindTrigger(_);});});nslog(window.location.href,1041);};bk.view.eD=function(B,_,A){baidu.on(B,_,function(_){A(baidu.event.get(_).target);baidu.event.preventDefault(_);});};baidu.more.ns("lemma");baidu.more.ns("bk.view");baidu.more.ns("bk.view.sublemma");bk.view.sublemma.fx=null;bk.view.subLemmaTitleStatusChange=function(B,_){var A=baidu.dom.query("#content div.b-ent-section");if(A.length>0){baidu.each(A,function(D,G){if(_==G){return;}if(baidu.dom.hasClass(D,"b-ent-section-expand")){if(G<_){var F=tool.dom.getTopPos(B),E=F-baidu.page.getScrollTop();}baidu.dom.hide(baidu.dom.next(D));baidu.dom.removeClass(D,"b-ent-section-expand");if(G<_){var A=tool.dom.getTopPos(B),C=A-E;if(document.documentElement.scrollTop){document.documentElement.scrollTop=C;}else{if(document.body.scrollTop){document.body.scrollTop=C;}}}setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:D,index:G});},1);}else{}});}baidu.dom.toggle(baidu.dom.next(B));baidu.dom.toggleClass(B,"b-ent-section-expand");setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:B,index:_});},1);};bk.view.showSubLemmaItem=function(_){var B=baidu.dom.query("div.b-ent-section"),B=baidu.dom.query("#content div.b-ent-section");if(B.length>0){baidu.each(B,function(A,B){if(B==_){return;}if(baidu.dom.hasClass(A,"b-ent-section-expand")){baidu.dom.hide(baidu.dom.next(A));baidu.dom.removeClass(A,"b-ent-section-expand");setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:A,index:B});},1);}else{}});}if(B[_]){var A=B[_];baidu.show(baidu.dom.next(A));baidu.addClass(A,"b-ent-section-expand");setTimeout(function(){bk.event.fire("bk.event.SectionStatusChanged",{ele:A,index:_});},1);}};bk.view.toggleSubLemmaItem=function(_){var A=baidu.dom.hasClass(baidu.g("b-ent-toc-trigger").parentNode.parentNode,"expand");bk.view.showorhideSubLemmaList(A);baidu.event.preventDefault(_);};bk.view.showorhideSubLemmaList=function(B){var E=baidu.g("b-ent-toc-trigger"),D=baidu.g("sublemma-options-list");if(bk.view.sublemma.fx){bk.view.sublemma.fx.stop();}if(B){var A=Math.ceil(D.getElementsByTagName("li").length/2)*26,C=new FX(D,{height:{to:A}},0.3,"easeIn",function(){baidu.removeClass(E.parentNode.parentNode,"expand");E.parentNode.title="\u6536\u8d77\u4e49\u9879";});baidu.on(document,"click",bk.view.outclick);}else{C=new FX(D,{height:{to:72}},0.3,"easeOut",function(){baidu.addClass(E.parentNode.parentNode,"expand");E.parentNode.title="\u66f4\u591a\u4e49\u9879";});try{baidu.un(document,"click",bk.view.outclick);}catch(_){}}bk.view.sublemma.fx=C;C.start();};bk.view.initSubLemmaList=function(){var D=baidu.dom.query("#content div.b-ent-section");function C(B){var D="hook-lemma-ext-module",A="lemmaContent-",C="data-src",_=baidu.dom.query("#"+A+B+" ."+D);baidu.each(_,function(A,_){A.src=A.getAttribute(C);A=null;});}if(D.length>0){var A={};function B(D){var _=D.index;if(!A[_]&&baidu.dom.hasClass(D.ele,"b-ent-section-expand")){bk.view.catalog().start(_);C(_);bk.view.lemmaImageInit(baidu.g("lemmaContent-"+_).parentNode);if(baidu.g("cardpic"+_)){bk.view.cardImageInit(baidu.g("cardpic"+_));}try{A[_]=true;}catch(B){}}D=null;}bk.event.on("bk.event.SectionStatusChanged",function(A){B(A);var C=baidu.g("sublemma-options-list").getElementsByTagName("li");if(C[A.index]){var _=baidu.dom.hasClass(A.ele,"b-ent-section-expand");baidu[_?"addClass":"removeClass"](C[A.index],"expand");}});baidu.each(D,function(B,_){if(baidu.dom.hasClass(B,"b-ent-section-expand")){C(_);A[_]=true;}else{A[_]=false;}baidu.on(B,"click",function(){bk.view.subLemmaTitleStatusChange(this,_);});});if(baidu.g("sublemma-options-list")){baidu.each(baidu.dom.query("#sublemma-options-list li>a"),function(A,_){baidu.on(A,"click",function(){bk.view.showSubLemmaItem(_);});});var _=baidu.g("b-ent-toc-trigger");if(_){baidu.on(_.parentNode,"click",bk.view.toggleSubLemmaItem);baidu.on(_.parentNode,"mouseover",function(){baidu.addClass(this,"toc-hover");});baidu.on(_.parentNode,"mouseout",function(){baidu.removeClass(this,"toc-hover");});baidu.on("sublemma-options-list","click",function(_){var A=baidu.event.get(_),B=A.target;if(B.nodeType==1&&(B.tagName.toLowerCase()=="a"||B.tagName.toLowerCase()=="span")){return;}else{nslog(location.href,515,{target:"list"});bk.view.showorhideSubLemmaList(1);}});bk.view.outclick=function(_){if(baidu.g("sidecatalog").style.display!="none"){return;}var A=baidu.event.get(_),B=A.target;if(!baidu.dom.contains(baidu.g("sublemma-options-list").parentNode,B)){bk.view.showorhideSubLemmaList(0);}A=B=null;};baidu.on("sublemma-options-list","mouseover",function(_){baidu.addClass(baidu.g("b-ent-toc-trigger").parentNode,"toc-hover");});baidu.on("sublemma-options-list","mouseout",function(_){baidu.removeClass(baidu.g("b-ent-toc-trigger").parentNode,"toc-hover");});}}}else{C(0);}baidu.each(baidu.dom.query("#content .b-ent-section-action-toggle"),function(_){baidu.on(_,"mouseover",function(){baidu.addClass(this,"section-hover");});baidu.on(_,"mouseout",function(){baidu.removeClass(this,"section-hover");});baidu.on(_,"click",function(_){baidu.event.preventDefault(_);});});};function getUserInfoAsc(){var _="/api/personalmesg?date="+new Date().getTime();baidu.ajax.get(_,function(_){showUserInfo(_);window.setTimeout(bk.ui.enctip.build_userinfo_tip,300);});}function showUserInfo(xhr){var json=eval("("+xhr.responseText+")");bk.lemma.bottleMessage.run(json.base);baidu.g("userPic").src=json.base.avatar;var unLen=30,throwBtlLinks=baidu.dom.query("a.throwbtl-link-view");if(json.base.uid&&throwBtlLinks.length>0){var lemmaId=baikeViewInfo.id,lemmaTitle=baikeViewInfo.title;baidu.array.each(throwBtlLinks,function(_){var B=baidu.dom.getAttr(_,"subLemmaId")||"",A=baidu.dom.getAttr(_,"subLemmaTitle")||"";_.onclick=function(){var _=baidu.dom.getAttr(this,"isViewCard")||"";nslog(location.href,_?3001:3002);baidu.bottle.throwBottle(lemmaId,lemmaTitle,json.base.uid,1,B,A);return false;};});}if(json.base.odp==2){unLen-=4;baidu.G("iconOdp").src="http://img.baidu.com/img/baike/userrole/odp"+json.base.odpLevel+".png";baidu.G("kedoutuanPic").style.display="inline-block";}if(json.base.admin>=2){unLen-=4;baidu.G("iconAdmin").src="http://img.baidu.com/img/baike/userrole/channeladmin"+json.base.adminLevel+".png";baidu.G("masterPic").style.display="inline-block";}if(json.base.vip){unLen-=4;baidu.G("iconVip").src="http://img.baidu.com/img/baike/userrole/core"+json.base.vipLevel+".png";baidu.G("corePic").style.display="inline-block";}var highVersionLink=baidu.G("highVersionLink");baidu.G("highVersionNum").innerHTML=json.base.hqVerNum;var goodVersionLink=baidu.G("goodVersionLink");baidu.G("goodVersionNum").innerHTML=json.base.goodVerNum;if(json.base.hqVerNum>0){highVersionLink.href="/uc/effort/#8";}if(json.base.goodVerNum>0){goodVersionLink.href="/uc/effort/#7";}var userTitleLink=baidu.G("userTitleLink");userTitleLink.innerHTML=json.base.username.subByte(unLen);baidu.G("userTitlePic").className="usertitle level"+json.base.level;baidu.G("userProcess").style.width=json.base.scorept+"%";if(json.hotword&&json.hotword.suc){words=json.hotword.data.words;showHotwords();setTimeout(function(){var _=baidu.G("hotWord");baidu.removeClass(_,"dnone");baidu.removeClass(_.parentNode,"dnone");},0);var hotHelpE=baidu.G("hotHelp"),hotHelpTip=baidu.G("hotHelpTip");baidu.on(hotHelpE,"mouseover",showTip(hotHelpTip));baidu.on(hotHelpE,"mouseout",hideTip(hotHelpTip));}var effortObj={notpassed:["\u672a\u901a\u8fc7\u7248\u672c","/uc/effort/#3"],HQVersion:["\u9ad8\u8d28\u91cf\u7248\u672c","/uc/effort/#8"],goodVersion:["\u4f18\u8d28\u7248\u672c","/uc/effort/#7"],passVersion:["\u5df2\u901a\u8fc7\u7248\u672c","/uc/effort"]};if(json.effort&&json.effort.suc){var data=json.effort.data;for(var i in data){var flag=true;break;}if(flag){var effArr=[];for(i in data){var len=32-effortObj[i][0].byteLength();effArr.push("<li>");effArr.push('<a class="blink" href="');effArr.push(effortObj[i][1]);effArr.push('" target="_blank" onclick="nslog(this.href,242);">');effArr.push(effortObj[i][0]);effArr.push("</a><span>\uff1a</span>");effArr.push('<a href="http://baike.baidu.com/history/id=');effArr.push(data[i].versionid);effArr.push('" target="_blank">');effArr.push(data[i].title.subByte(len));effArr.push("</a>");effArr.push("</li>");}baidu.G("efforts").innerHTML=effArr.join("");var effortDiv=baidu.G("effort");baidu.removeClass(effortDiv,"dnone");baidu.removeClass(effortDiv.parentNode,"dnone");nslog(location.href,244);baidu.each(baidu.G("effort").getElementsByTagName("a"),function(_){baidu.on(_,"mousedown",function(){nslog(this.href,243);});});}}baidu.G("userInfoDiv").style.display="block";var userTip=baidu.G("userTip"),startPos=58,endPos=215;baidu.G("userTipArrow").style.left=Math.round(startPos+(endPos-startPos)*json.base.scorept/100)-4+"px";var userProcessBack=baidu.G("userProcessBack");baidu.on(userProcessBack,"mouseover",showTip(userTip));baidu.on(userProcessBack,"mouseout",hideTip(userTip));baidu.G("userLevel").innerHTML=json.base.level;baidu.G("totalscore").innerHTML=json.base.totalscore;baidu.G("scorediff").innerHTML=json.base.scorediff;baidu.G("nextlevel").innerHTML=json.base.nextlevel;showGrowupTask(json.levelTaskInfo);json.routineTasks&&showDailyTask(json.routineTasks);}function showHotwords(){var B=words.length||0,E=4,C=[];while(C.length!=4){var K=Math.round(Math.random()*(B-1)),D=false;for(var F=0;F<C.length;F++){if(C[F]==K){D=true;break;}}if(D){continue;}C.push(K);if(C.length==words.length){break;}}var J="",A=[];for(F=0;F<4&&F<C.length;F++){var G=baidu.string.decodeHTML(words[C[F]].title),I=baidu.string.decodeHTML(words[C[F]].perfectpoints),_=baidu.string.decodeHTML(words[C[F]].reason),H=G.subByte(10);A.push("<li>");A.push('<a onclick="nslog(this.href,226);"  target="_blank" href="');A.push(words[C[F]].link+'"');A.push(' onmouseout="hideCompleteTip();"');A.push(' onmouseover="showCompleteTip('+F+", '"+baidu.string.encodeHTML(G).replace(/'/g,"&acute;")+"', '"+baidu.string.encodeHTML(I).replace(/'/g,"&acute;")+"');\">");A.push(baidu.string.encodeHTML(H));A.push("</a>");A.push("<span");A.push(' onmouseout="hideHotReasonTip();"');A.push(' onmouseover="showHotReasonTip('+F+",'"+baidu.string.encodeHTML(_).replace(/'/g,"&acute;")+"');\"");A.push(">\uff1a");A.push(baidu.string.encodeHTML(_.subByte(32-H.byteLength())));A.push("</span>");A.push("</li>");}baidu.G("hotWords").innerHTML=A.join("");}function showTip(_){return function(){if(timeout){clearTimeout(timeout);baidu.G("completeTip").style.display="none";}_.style.display="block";};}function hideTip(_){return function(){_.style.display="none";};}function hideHotReasonTip(){baidu.G("hotReasonTip").style.display="none";}var timeout;function hideCompleteTip(){timeout=setTimeout(function(){baidu.G("completeTip").style.display="none";},1000);}function showHotReasonTip(B,_){_=baidu.string.encodeHTML(_);if(timeout){clearTimeout(timeout);baidu.G("completeTip").style.display="none";}var A=baidu.G("hotReasonTip");baidu.G("hotReasonTipMain").innerHTML="<p>"+_+"</p>";A.style.top=50+B*20+"px";A.style.display="block";}function showCompleteTip(D,_,B){_=baidu.string.encodeHTML(_);B=baidu.string.encodeHTML(B);if(timeout){clearTimeout(timeout);}var C=baidu.G("completeTip");baidu.G("completeTipMain").innerHTML="<p>"+_+"</p><p><span>\u5b8c\u5584\u70b9\uff1a</span>"+B+"</p>";C.style.display="block";var A=C.scrollHeight;C.style.top=54+D*20-A-21+"px";}function showGrowupTask(F){if(F==0){F={};F.taskStat=0;}else{if(F==9){return;}}var A=function(A){var _="";switch(parseInt(A)){case 1:_="\u73b0\u5728\u53bb\u5b8c\u6210";break;case 2:_="\u73b0\u5728\u53bb\u9886\u5956";break;default:_="\u6211\u8981\u53bb\u53c2\u52a0";break;}return _;},E=F.taskStat!=0,B=baidu.q("icon-growup-task","growupTask")[0],D=[],_=baidu.g("growupTask");if(!E){D.push('<li class="fix" style="margin-top:4px;"><span class="fl">\u52a0\u901f\u5347\u7ea7\uff0c\u5feb\u901f\u6210\u957f\u3002</span><a href="/uc/task#1" target="_blank" class="act mr8">'+A(F.taskStat)+"&gt;&gt;</a></li>");baidu.g("growupTasks").innerHTML=D.join("");baidu.removeClass(_,"dnone");baidu.removeClass(_.parentNode,"dnone");B.title="\u6210\u957f\u4efb\u52a1";baidu.each(baidu.dom.query("#growupTask h3 a"),function(_){_.href+="#1";});return;}else{B.title=F.taskName;var C=-49;B.style.backgroundPosition=(C-(F.groupID-1)*16)+"px -122px";var G="/uc/userleveltask?groupID="+F.groupID+"&taskID="+F.taskID+"&action=getGroupTask&r="+Math.random();baidu.ajax.get(G,function(C){if(C.responseText){var B=baidu.json.parse(C.responseText);B.taskProcess=(B.taskStat==2?1:B.taskProcess);D.push("<li>");D.push('<a class="mr4" target="_blank" href="/uc/task#2" onclick="nslog(this.href, 448)">');D.push(B.taskName);D.push("</a>");D.push('<span class="mr4">'+B.taskTaget+"</span>");D.push('<span class="mr4"><span class="icon-wealth mr4"></span>&nbsp;<span class="impt-word">+'+B.taskGold+"</span></span>");D.push("</li>");D.push('<li class="fix">');D.push('<a class="act mr8" href="/uc/task#2" target="_blank" onclick="nslog(this.href, 448)">'+A(B.taskStat)+"&gt;&gt;</a>");D.push('<div id="taskProgress" class="progressbar"></div>');D.push("</li>");baidu.g("growupTasks").innerHTML=D.join("");baidu.each(baidu.dom.query("#growupTask h3 a"),function(_){_.href+="#2";});baidu.removeClass(_,"dnone");baidu.removeClass(_.parentNode,"dnone");bk.usercenter.progressbar.init({text:"\u5b8c\u6210"+parseInt(B.taskProcess*100)+"%",selector:"taskProgress",process:B.taskProcess,textStyle:"color:#"+(B.taskStat==1?"e4ff00":"fff"),maxWidth:120,type:"simple"});}});}}function showDailyTask(D){var A=D.faces.length,B=[];function H(){var _=false,C=(new Date()).getDate();if(A>0){for(var E=0,B=D.faces.length;E<B;++E){if(D.faces[E]==C){_=true;break;}}}return _;}function C(D){var A=[];for(var G=0,C=D.length;G<C;++G){var B=D[G],_=B.taskType,E=B.taskStatus==1?"\u7ee7\u7eed\u53c2\u52a0":"\u53c2\u52a0\u4efb\u52a1",F=B.awardTxt?'\uff0c\u62ff<span class="mlr4 impt-word">'+B.awardTxt+"</span>":"";A.push('<li><a target="_blank" href="'+B.entry+'">'+(B.shortTitle||B.name)+"</a>\uff1a"+E+F+'<a href="'+B.entry+'" target="_blank" class="goto"></a></li>');}return A.join("");}if(D.ongoingjoined.length==0&&D.recommend.length==0){return;}B.push('<li>\u672c\u6708\u7d2f\u8ba1\u70b9\u4eae<span class="impt-word mlr4">'+A+"</span>\u5929\u3002");if(!H()){B.push("\u4eca\u65e5\u7b11\u8138\u8fd8\u6ca1\u70b9\u4eae\u54e6\u3002");}B.push("</li>");var F=[];if(D.ongoingjoined&&D.ongoingjoined.length>0){var E=D.ongoingjoined[0];E.taskStatus=1;if(E.badgesToGain.length>0){E.awardTxt=E.badgesToGain[0].name;}F.push(E);}if(D.recommend&&D.recommend.length>0){var _=D.recommend[0];_.taskStatus=2;_.awardTxt=_.award[0];F.push(_);}B.push(C(F));var G=baidu.g("dailyTasks");G.innerHTML=B.join("");baidu.removeClass(G,"dnone");baidu.removeClass(G.parentNode,"dnone");}function getUserRightAsc(){var _="/api/polycheck?lemmaId="+baikeViewInfo.id+"?date="+new Date().getTime();baidu.ajax.get(_,function(A,_){if(_=="0"){baidu.show("subSet");if(baidu.g("link-divider")){baidu.show("link-divider");}}});}bk.event.on("bk.event.user.login",function(){getUserInfoAsc();});bk.event.on("bk.event.user.login",getUserRightAsc);bk.event.on("bk.event.user.login",function(){if(baidu.g("usertaskstatus")){userTaskInfo();}});baidu.dom.ready(function(){baidu.dom.ready(bk.userbar.check);baidu.ajax.get("/api/lemmacnt/"+baikeViewInfo.id,function(xhr){var result=eval("("+xhr.responseText+")");if(result){baidu.G("viewPV").innerHTML=result.pv;baidu.G("vote_num").innerHTML=result.rec;if(result.dynamic){bk.view.getDynamicData();}}});(function(){var _=baidu.G("vote_btn");baidu.on(_,"mouseover",function(){this.className="text_vote2";});baidu.on(_,"mouseout",function(){this.className="text_vote1";baidu.G("vote_txt").innerHTML="\u672c\u8bcd\u6761\u5bf9\u6211\u6709\u5e2e\u52a9";});baidu.on(_,"click",function(){baidu.sio.callByBrowser("/view/recommendLemma/lemmaid="+baikeViewInfo.id+"&random="+Math.random());});_=null;})();baidu.each(document.getElementsByTagName("img"),function(A,_){if(A.className=="editorImg"){baidu.on(A,"mousedown",function(){nslog(this.src,8);});}});bk.view.relatedInit();bk.view.coEditorInit();(function(){var A=location.hash;if(A){setTimeout(function(){window.location.hash=A.slice(1);},1000);}var _=baidu.G("lastModifyTime");_.innerHTML=bk.view.getDays(baidu.trim(_.innerHTML));})();baidu.on(baidu.g("gotop"),"click",function(_){baidu.event.preventDefault(_);nslog(location.href,1028);window.scrollTo(0,0);});bk.view.initSubLemmaList();baidu.each(baidu.dom.query("#content .lemma-main-content"),function(A,_){baidu.on(A,"click",function(A){var B=baidu.event.get(A),C=B.target;if(C.nodeName.toUpperCase()=="SUP"){gotoRef(C,_);}});});baidu.sio.callByBrowser("http://baike.bdimg.com/js/bk.usercard.js?r="+Math.random());(function(){if(baidu.browser.isWebkit){var _=baidu.q("commmonModule-th","content");baidu.each(_,function(_){_.width=parseInt(_.width)+21;});}})();});baidu.on(window,"load",function(){bk.view.lemmaImageInit(baidu.g("lemmaContent-"+baikeViewInfo.expIndex));});baidu.more.ns("bk.editor");bk.editor.ani=function(B,_,A){if(B){this.time=B;}if(_){this.transform=_;}if(A){this.interval=A;}};bk.editor.ani.prototype={interval:40,transform:function(_){return 1-Math.pow(1-_,3);},time:2000,task:null,finishFunc:null,start:function(F,G){var E=this.interval,B=this.time,A=this.transform,H=A(1),D=0,_=this;this.finishFunc=G;function C(){D+=E;var C=D/B;if(C>=1){F(1);G&&G();clearInterval(_.task);}else{F(A(C)/H);}}this.task=setInterval(C,E);},stop:function(){if(this.task){clearInterval(this.task);}if(this.finishFunc){this.finishFunc();}}};